cmake_minimum_required (VERSION 3.8)

message("Initializing DreamcastSDK CMake")

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_C_COMPILER_WORKS 1)
set(CMAKE_CXX_COMPILER_WORKS 1)

project ("DreamcastSDK" CXX C)

add_library(
    "dreamcast_runtime" STATIC
    "include/dce/core/kernel.hpp"
    "source/core/kernel.cpp"
    "include/dce/xorshift.hpp"
    "source/xorshift.cpp"
    "source/platform/platform.cpp"
    "include/dce/core/installer.hpp" 
    "source/core/installer.cpp" 
    "include/dce/env.hpp" 
    "include/dce/classdb.hpp" 
    "source/classdb.cpp"
    "include/dce/cmddb.hpp" 
    "include/dce/pixelformat.hpp" 
    "source/pixelformat.cpp" 
    "include/dce/half.hpp" 
    "include/dce/serial.hpp" 
    "source/serial.cpp" 
    "include/dce/json_impl.hpp" 
    "source/renderer/renderer.hpp" 
    "source/renderer/renderer.cpp" 
    "include/dce/config.hpp" 
    "source/config.cpp" 
    "include/dce/state.hpp" 
    "include/dce/proto.hpp" 
    "source/proto.cpp" 
    "include/dce/core/subsystem.hpp" 
    "source/core/subsystem.cpp" 
    "source/cmddb.cpp" 
    "source/state.cpp" 
    "source/renderer/embedded_shaders.hpp" 
    "source/renderer/embedded_shaders.cpp" 
    "source/renderer/gui_renderer.hpp" 
    "source/renderer/gui_renderer.cpp" 
    "source/renderer/gl_headers.hpp" 
    "source/gui/font_headers.hpp" 
    "source/renderer/utils.cpp" 
    "source/renderer/utils.hpp"  
    "source/gui/gui.hpp" 
    "source/gui/gui.cpp" 
    "source/gui/theme.hpp" 
    "source/gui/theme.cpp" 
    "source/gui/dockspace.hpp" 
    "source/gui/dockspace.cpp"
    "source/platform/input.hpp" 
    "source/platform/input.cpp" 
    "source/platform/platform_headers.hpp"
    "source/platform/callback_hooks.hpp" 
    "source/platform/callback_hooks.cpp"
    "source/gui/terminal.hpp"
    "source/gui/terminal.cpp" 
    "include/dce/core/main.hpp"
    "source/terminal_sink.hpp"    
    "source/half.cpp"   
    "source/texture.cpp" 
    "include/dce/texture.hpp" 
    "source/gui/utils.hpp" 
    "include/dce/resource_manager.hpp" 
    "source/resource_manager.cpp"  
    "source/gui/widgets/resource_viewer.hpp" 
    "source/gui/widgets/resource_viewer.cpp" 
    "include/dce/event_behaviour.hpp" 
    "source/event_behaviour.cpp" 
    "include/dce/ecs.hpp" 
    "include/dce/scenery.hpp" 
    "source/scenery.cpp" 
    "include/dce/mesh.hpp"
    "source/mesh.cpp" 
    "source/gui/gui_headers.hpp"
    "include/dce/mathlib.hpp" 
    "source/gui/widgets/profiler.hpp"
    "source/gui/widgets/profiler.cpp" 
    "include/dce/diagnostics.hpp" 
    "source/gui/scroll_roll_buffer.hpp" 
    "source/gui/scroll_roll_buffer.cpp" 
    "include/dce/shader.hpp" 
    "source/shader.cpp" 
    "include/dce/blob.hpp"
    "source/blob.cpp" 
    "source/resource.cpp" 
    "source/gui/widgets/shader_merger.hpp" 
    "source/gui/widgets/shader_merger.cpp" 
    "source/gui/file_dialog_tool.hpp"
    "source/gui/file_dialog_tool.cpp" 
    "source/gui/widgets/ram_editor.hpp" 
    "source/flycam.hpp" 
    "source/flycam.cpp" 
    "include/dce/chrono.hpp" 
    "source/sysclock.hpp" 
    "source/sysclock.cpp" 
    "include/dce/camera.hpp" 
    "include/dce/transform.hpp" 
    "include/dce/mesh_renderer.hpp" 
    "source/renderer/gpu.hpp"
    "source/renderer/gpu.cpp" 
    "source/renderer/stats.hpp" 
    "source/renderer/stats.cpp" 
    "source/transform.cpp" 
    "source/renderer/clocks.hpp" 
    "source/renderer/clocks.cpp" 
    "source/texture_runtime.cpp" 
    "source/mesh_runtime.cpp" 
    "source/shader_runtime.cpp" 
    "include/dce/entity_meta.hpp" 
    "include/dce/comcollections.hpp" 
    "source/gui/editor.hpp" 
    "source/gui/editor.cpp" 
    "source/gui/widgets/hierarchy.hpp" 
    "source/gui/widgets/hierarchy.cpp"
    "source/gui/widgets/inspector.hpp"
    "source/gui/widgets/inspector.cpp")

include("extern/CMakeLists.txt")

add_executable("dreamcreator" WIN32 "entry.cpp")
target_link_libraries("dreamcreator" "dreamcast_runtime")

add_executable("dreamcast" WIN32 "entry.cpp")
target_link_libraries("dreamcast" "dreamcast_runtime")
